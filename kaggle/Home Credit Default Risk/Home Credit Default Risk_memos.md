# 得られる知見
- ペアワイズ相関のみかた
- 特徴量の作成
    - 多項式特徴量
    - ドメイン知識から作成した特徴量
- 各データセットのデータモデリングを行いその後データをマージ
- ベースラインモデルの作成

- エンティティを持ったデータの取り扱い
- 分類問題
# OverView
##  Description
- 信用履歴が不十分な人がローンを貸す条件を満たしてるか判別したい
## Evaluation
- 提出物は、予測確率と観察された目標との間のＲＯＣ曲線下面積で評価される。
- 提出フォーマット
```
SK_ID_CURR,TARGET
100001,0.1
100005,0.9
100013,0.2
etc.
```
## Data
- application_{train|test}.csv
    - これは、Train（TARGETあり）とTest（TARGETなし）の2つのファイルに分けられたメインテーブルです。
    - すべてのアプリケーションの静的データ1行は、データサンプルの1つのローンを表します。
    - 0:ローン完済, 1:ローン未返済
- bureau.csv
    - 他の金融機関によって提供された、以前のすべての顧客のクレジット（Credit Bureauに報告されたもの（このサンプルにローンがある顧客の場合））。
        - 他金融機関ローン
    - サンプルのすべてのローンについて、申込日までにクライアントがCredit Bureauに持っていたクレジット数と同じ数の行があります。
        - 申し込み日区切りのクレジット使用履歴
- bureau_balance.csv
    - bureauとエンティティ
    - クレジットビューローの過去のクレジットの月次残高。
        - クレジットの月次残高
    - このテーブルには、Credit Bureauに報告された過去のすべてのクレジットの履歴の各月ごとに1行があります。つまり、テーブルには（サンプルの#loans *相対的な以前のクレジットの数*過去のクレジットについて観察可能な履歴がある月数）行があります.
        - 月区切りのクレジット履歴
- POS_CASH_balance.csv
    - 以前のPOS（販売時点）と申込者がホームクレジットで保有していた現金ローンの月次残高のスナップショット。
        - このサービスの月次ローン
    - この表には、サンプルのローンに関連するホームクレジットの過去のすべてのクレジット（消費者向けクレジットおよび現金ローン）の履歴の各月ごとに1行があります - つまり、テーブルには（サンプルの＃ローン*相対的な以前のクレジットの数*月数）ここでは、前のクレジットの行について観察可能な履歴があります。
        - このサービスの月区切りの履歴
- credit_card_balance.csv
    - 申請者がホームクレジットで持っている以前のクレジットカードの月次残高スナップショット。
        - このサービス経由でのクレジットカードの月次残高
    - この表は、私たちのサンプルの貸出金に関連するホームクレジットの以前のすべてのクレジット（消費者向けクレジットおよび現金ローン）の履歴の各月ごとに1行を持ちます - つまり、テーブルは（サンプルの＃ローン*相対的な以前のクレジットカードの数*＃of）過去のクレジットカードの行について観察可能な履歴がある月。
        - このサービス経由でのクレジットカードの月区切りの履歴
- previous_application.csv
    - 私たちのサンプルでローンを持っているクライアントのホームクレジットローンのすべての以前のアプリケーション。
        - 前アプリのクレジットローン
    - データサンプルには、ローンに関連する以前のアプリケーションごとに1行あります。
- installments_payments.csv
    - サンプルのローンに関連して、ホームクレジットで以前に支払われたクレジットの返済履歴。
        - このサービスでの返済履歴
    - 行われた支払いごとに1行と、b）未払いの支払いについて1行があります。
        - 支払い済みと未支払い
    - 1行は、1回の分割払い、またはサンプルのローンに関連する以前の1回の住宅ローンクレジットの1回の分割に対応する1回の分割払いに相当します。
        - 1回の分割支払い額
- HomeCredit_columns_description.csv
    - このファイルには、さまざまなデータファイルの列についての説明が含まれています。
        - データファイルの説明
- データの傾向
    - 月単位
    - ローンと返済が対
    - ローンは約3種ほど
    - ローン種別毎に重みを変えて予測
    - 支払い傾向も判断材料
    - ローン数

# kernels1
## Start Here: A Gentle Introduction
### Data
- データ概要
    - 銀行で保護されていない人々に提供された与信枠（ローン）専用のサービスです
    - クライアントがローンを返済するのか困難を被るのかを予測する
- ここではデータの扱いやすさから一つのみ使用する
### Read Data
- トレーニングデータには、307511個の観測値（それぞれ1つの個別のローン）と、TARGET（予測したいラベル）を含む122個の機能（変数）があります。
- テストデータはデータ数がかなり少なめ
### Exploratory Data Analysis(EDA)
-  返済されなかったローンよりも時間通りに返済されたローンの方がはるかに多い
### Examine Missing Values
- 欠損値確認
- 欠損値対処
    - [o]欠損値に依存しないモデルを使う(XGBoost)
    - 欠損値の多い列は列ごと削除
        - ただし特徴量の重要度がわからない場合はやらないほうが良い
### Column Types

### Encoding Categorical Variables
- LabelEncoding
    - 2種データのみなら有用
- OneHotEncoding
    - 多変数で有用(3以上)
- トレーニングデータとテストデータのカラムの整合を取る
### Back to Exploratory Data Analysis
- 各カラムの基本統計値を確認
- 異常値検出
    - 意味のある異常の出方の場合は何らかの法則に則って補完する
    - ない場合正しい方に変動する場合は欠損値扱い
    - 今回は異常値をNan扱いした場合に予測した分布に近しいものとなったため補完値はNanを採用
- 相関関係
    - 目的変数との相関関係を確認
    - 年齢と未返済には負の相関あり-年をとるほど返済率が高い
    - EXT_SOURCEも負の相関あり

### Feature Engineering
- Polynomial features
    - 複数の特徴を多項式で組み合わせて合成した特徴量
- Domain knowledge features
    - データに対する限られた専門知識を用いて特徴量を理解する

### Baseline
- 単純なモデルを作成する
- 予測結果を確認し改善方法を考える
- 作成した多項式特徴量とドメイン知識ベースの特徴量を追加して効果を確認
- さらなるfeature Engineeringを行い精度向上を図る

# kernels2
## Introduction: Manual Feature Engineering
```
特徴エンジニアリングを手動で行う場合ドメインの専門知識に依存しています。
基本的に、私たちのアプローチは可能な限り多くの機能を作り、それからそれらを使うためにモデルにそれらすべてを与えることです！ 
その後、モデルからの特徴の重要度、またはPCAなどの他の手法を使用して、特徴の縮小を実行できます。
```
### Example: Counts of a client's previous loans
- 過去のローン数集計
### Assessing Usefulness of New Variable with r value
- 基本統計量を確認
- Correlations of Aggregated Values with Target
### Function for Numeric Aggregations
### Categorical Variables
### Putting the Functions Together

- Bureau
  - 以前のローン回数